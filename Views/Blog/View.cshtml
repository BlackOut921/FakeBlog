@using FakeBlog.Models.Blog
@model FakeBlogModel

@{
	ViewData["Title"] = "Blog Edit";
	bool userLoggedIn = User.Identity != null && User.Identity.IsAuthenticated;
	bool userIsAuthor = userLoggedIn && User.Identity?.Name == Model?.Author;
}

<div class="bg-light bg-gradient border p-3">
	@if (Model == null)
	{
		<p class="lead text-danger">Error loading blog</p>
	}
	else
	{
		if (userIsAuthor)
		{
			<div class="text-end">
				<a asp-controller="Blog" asp-action="Edit" asp-route-id="@Model.BlogId" class="btn btn-outline-dark">
					<i class="bi bi-pen me-1"></i>Edit
				</a>
			</div>
		}

		<h1 class="display-1">@Model.Title</h1>
		<a asp-controller="Blog" asp-action="Profile" asp-route-id="@Model.AuthorId">@Model.Author</a>
		<p class="lead pb-3 border-bottom">@Model.Content</p>

		<div class="d-flex flex-column flex-md-row justify-content-between">
			<p>Posted: @Model.DateCreated</p>
			<p>Last updated: @Model.LastUpdated</p>
		</div>
		
		<div class="text-end">
			<a asp-controller="Blog" asp-action="Report" asp-route-id="@Model.BlogId" class="btn btn-outline-danger">
				<i class="bi bi-pen me-1"></i>Report
			</a>
		</div>
	}
</div>